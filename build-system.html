<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Build System</title><link rel="stylesheet" type="text/css" href="css/style.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.76.1" /><link rel="home" href="index.html" title="" /><link rel="up" href="community.html" title="Community" /><link rel="prev" href="issue-tracker.html" title="Issue Tracker" /><link rel="next" href="continuous-integration.html" title="Continuous Integration" />


<!-- favicon -->

<link rel="shortcut icon" href="http://qi4j.org/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="icon" href="http://qi4j.org/favicon.ico" type="image/x-icon" />

<!-- style -->

<link href="css/shCore.css" rel="stylesheet" type="text/css" />
<link href="css/shCoreEclipse.css" rel="stylesheet" type="text/css" />
<link href="css/shThemeEclipse.css" rel="stylesheet" type="text/css" />
<link href="css/qi4j.css" rel="stylesheet" type="text/css" />

<!-- Syntax Highlighter -->

<script type="text/javascript" src="js/shCore.js"></script>
<script type="text/javascript" src="js/shBrushJava.js"></script>
<script type="text/javascript" src="js/shBrushScala.js"></script>
<script type="text/javascript" src="js/shBrushJScript.js"></script>
<script type="text/javascript" src="js/shBrushBash.js"></script>
<script type="text/javascript" src="js/shBrushPlain.js"></script>
<script type="text/javascript" src="js/shBrushXml.js"></script>
<script type="text/javascript" src="js/shBrushGroovy.js"></script>
<script type="text/javascript" src="js/shBrushPython.js"></script>
<script type="text/javascript" src="js/shBrushRuby.js"></script>
<script type="text/javascript" src="js/shBrushCSharp.js"></script>

<script type="text/javascript">
  SyntaxHighlighter.defaults['tab-size'] = 4;
  SyntaxHighlighter.defaults['gutter'] = false;
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all()
</script>

<!-- JQuery -->

<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>

<!-- Image Scaler -->

<script type="text/javascript" src="js/imagescaler.js"></script>

<!-- Table Styler -->

<script type="text/javascript" src="js/tablestyler.js"></script>

<!-- Version Switcher -->

<script type="text/javascript" src="js/versionswitcher.js"></script>

<!-- Qi4j WebSite Progressive Enhancement -->

<link href="css/progressive-enhancement.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/jquery.scrollTo-1.4.2.js"></script>
<script type="text/javascript" src="js/progressive-enhancement.js"></script>

<!-- Analytics -->
 <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3118496-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
 </script>

  </head><body><div xmlns="" xmlns:exsl="http://exslt.org/common" class="logo"><a href="index.html"><img src="images/logo-standard.png" /></a></div><div xmlns="" xmlns:exsl="http://exslt.org/common" class="top-nav"><div xmlns="http://www.w3.org/1999/xhtml" class="toc"><dl><dt><span class="section"><a href="index.html#home">Home</a></span></dt><dt><span class="section"><a href="news.html">News</a></span></dt><dt><span class="section"><a href="tutorials.html">Tutorials</a></span></dt><dt><span class="section"><a href="javadocs.html">Javadoc</a></span></dt><dt><span class="section"><a href="samples.html">Samples</a></span></dt><dt><span class="section"><a href="core.html">Core</a></span></dt><dt><span class="section"><a href="libraries.html">Libraries</a></span></dt><dt><span class="section"><a href="extensions.html">Extensions</a></span></dt><dt><span class="section"><a href="tools.html">Tools</a></span></dt><dt><span class="section"><a href="glossary.html">Glossary </a></span></dt><dt><span class="section"><span xmlns="" href="community.html">Community</span></span></dt></dl></div></div><div xmlns="" xmlns:exsl="http://exslt.org/common" class="sub-nav"><div xmlns="http://www.w3.org/1999/xhtml" class="toc"><dl><dt><span class="section"><a href="community.html#community-intro">Introduction</a></span></dt><dt><span class="section"><a href="download.html">Download Qi4j</a></span></dt><dt><span class="section"><a href="help.html">Get Help</a></span></dt><dt><span class="section"><a href="codebase.html">Codebase</a></span></dt><dt><span class="section"><a href="participate.html">Participate</a></span></dt><dt><span class="section"><a href="playing-field.html">Playing Field</a></span></dt><dt><span class="section"><a href="community-contributing.html">Contributing to Qi4j</a></span></dt><dt><span class="section"><a href="issue-tracker.html">Issue Tracker</a></span></dt><dt><span class="section"><span xmlns="" href="build-system.html">Build System</span></span></dt><dt><span class="section"><a href="continuous-integration.html">Continuous Integration</a></span></dt><dt><span class="section"><a href="contributors.html">People behind Qi4j</a></span></dt><dt><span class="section"><a href="licensing.html">Licensing</a></span></dt><dt><span class="section"><a href="licensing-faq.html">Licensing FAQ</a></span></dt><dt><span class="section"><a href="community-docs.html">Writing Qi4j Documentation</a></span></dt></dl></div></div><div class="section" title="Build System"><div class="titlepage"><div><div><h3 class="title"><a id="build-system"></a>Build System</h3></div></div></div><p>Qi4j community migrated away from Maven after several years of frustration, especially around release management,
versioning and cross-module dependency resolution issues, in Feb 2011. The tool of choice is now Gradle, and it
doesn’t require any installation, there are gradlew and gradlew.bat in the root folder of the Qi4j SDK that will
bootstrap Gradle if not done so already.</p><div class="section" title="Versions"><div class="titlepage"><div><div><h4 class="title"><a id="_versions"></a>Versions</h4></div></div></div><p>By default, the build system produces a "zero build". It means that there is no version assigned to the build, and
a "0" is used in the produced artifacts. This is due to our disagreement (with Maven community) that the "next" version
name/number is known prior to the release. This is in our opinion a delayed decision. To build a particular version,
you specify a "version" property on the command-line, like</p><pre class="programlisting brush: bash">./gradlew -Dversion=2.0-FLAVOUR install</pre><p>If a "version" property is not defined, the build system will refuse to make a release and upload.</p></div><div class="section" title="Tasks"><div class="titlepage"><div><div><h4 class="title"><a id="_tasks"></a>Tasks</h4></div></div></div><p>Gradle is very flexible, and we have defined (or in the process of defining) the following tasks (same as Ant’s targets).</p><div class="section" title="clean"><div class="titlepage"><div><div><h5 class="title"><a id="_clean"></a>clean</h5></div></div></div><p>Clean up of all build output and restoring the code base to a fresh state.</p></div><div class="section" title="check"><div class="titlepage"><div><div><h5 class="title"><a id="_check"></a>check</h5></div></div></div><p>This is the default build, which compiles the code and run the tests, but nothing else. A quick way to check that
nothing broke.</p></div><div class="section" title="install"><div class="titlepage"><div><div><h5 class="title"><a id="_install"></a>install</h5></div></div></div><p>Is roughly the same as Maven’s install goal. It produces the test reports and javadocs and installs all the Jars into
the local disk repository, for consumption by other applications.</p></div><div class="section" title="buildAll"><div class="titlepage"><div><div><h5 class="title"><a id="_buildall"></a>buildAll</h5></div></div></div><p>Produces all the archives, javadocs, manuals and website content. The output is generated to qi4j-sdk/build.</p></div><div class="section" title="release"><div class="titlepage"><div><div><h5 class="title"><a id="_release"></a>release</h5></div></div></div><p>Uploads the release artifacts to the distribution servers and creates the release output into the
qi4j-sdk/build/distributions directory.</p></div></div><div class="section" title="Configuration"><div class="titlepage"><div><div><h4 class="title"><a id="_configuration_19"></a>Configuration</h4></div></div></div><p>Build System configuration is done through Gradle properties.</p><p>This can be done in many ways, see
<a class="ulink" href="http://gradle.org/docs/current/userguide/tutorial_this_and_that.html#sec:gradle_properties_and_system_properties" target="_top">Gradle properties and system properties</a>.</p><div class="section" title="Signing"><div class="titlepage"><div><div><h5 class="title"><a id="_signing"></a>Signing</h5></div></div></div><p>Artifact signing is done using PGP. You need to provide Gradle the following properties</p><pre class="literallayout">signing.keyId=FB751943
signing.password=foobar
signing.secretKeyRingFile=/home/foo/.gnupg/secring.gpg</pre></div><div class="section" title="Artifact Upload"><div class="titlepage"><div><div><h5 class="title"><a id="_artifact_upload"></a>Artifact Upload</h5></div></div></div><p>Artifact upload behavior depends on the version assigned to the build.</p><p>By default RELEASES are signed, SNAPSHOTS are not.
Signing can be turned on or off by setting the <code class="literal">uploadSigned</code> property to false.</p><p>By default RELEASES must satisfy ReleaseSpecification, SNAPSHOT don’t.
ReleaseSpecification usage can be turned on or off by setting the <code class="literal">uploadReleaseSpec</code> property to false.</p><p>By default RELEASES and SNAPHOTS are uploaded using WEBDAV.
Used Wagon can be overriden by setting the <code class="literal">uploadWagon</code> property.</p><p>By default RELEASES and SNAPSHOTS are uploaded to Cloudbees.
Target repository can be overriden by setting the <code class="literal">uploadRepository</code> property.</p><p>No username/password is provided by default.
If needed set them using the <code class="literal">uploadUsername</code> and <code class="literal">uploadPassword</code> properties.</p><p>For example here is how to deploy all artifacts as unsigned SNAPSHOTs to a given repository:</p><pre class="programlisting brush: bash">./gradlew uploadArchives -Dversion=2.0-SNAPSHOT -PuploadReleaseSpec=false \
    -PuploadWagon=what:ever:wagon -PuploadRepository=http://what.ever.repository/url \
    -PuploadUsername=foo -PuploadPassword=bar</pre><p>And here is how to deploy a signed release to the local filesystem:</p><pre class="programlisting brush: bash">./gradlew uploadArchives -Dversion=2.0 -PuploadRepository=file:///path/to/local/repository</pre><p>See the <a class="ulink" href="http://www.gradle.org/docs/current/userguide/maven_plugin.html#wagonLibs" target="_top">Gradle documentation</a> about
supported protocols.</p></div></div></div><div xmlns="" xmlns:exsl="http://exslt.org/common" class="footer">(c) 2012 The Qi4j Community</div></body></html>

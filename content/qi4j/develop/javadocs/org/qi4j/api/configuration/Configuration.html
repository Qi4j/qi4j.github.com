<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="fr">
<head>
<!-- Generated by javadoc (version 1.7.0_75) on Fri Jan 23 12:08:57 CET 2015 -->
<title>Configuration (Qi4j SDK 0)</title>
<meta name="date" content="2015-01-23">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Configuration (Qi4j SDK 0)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../org/qi4j/api/configuration/Configuration.ConfigurationMixin.html" title="class in org.qi4j.api.configuration"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/qi4j/api/configuration/Configuration.html" target="_top">Frames</a></li>
<li><a href="Configuration.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.qi4j.api.configuration</div>
<h2 title="Interface Configuration" class="title">Interface Configuration&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Subinterfaces:</dt>
<dd><a href="../../../../org/qi4j/entitystore/file/FileEntityStoreService.html" title="interface in org.qi4j.entitystore.file">FileEntityStoreService</a>, <a href="../../../../org/qi4j/entitystore/hazelcast/HazelcastEntityStoreService.html" title="interface in org.qi4j.entitystore.hazelcast">HazelcastEntityStoreService</a>, <a href="../../../../org/qi4j/entitystore/jclouds/JCloudsMapEntityStoreService.html" title="interface in org.qi4j.entitystore.jclouds">JCloudsMapEntityStoreService</a>, <a href="../../../../org/qi4j/entitystore/jdbm/JdbmEntityStoreService.html" title="interface in org.qi4j.entitystore.jdbm">JdbmEntityStoreService</a>, <a href="../../../../org/qi4j/entitystore/leveldb/LevelDBEntityStoreService.html" title="interface in org.qi4j.entitystore.leveldb">LevelDBEntityStoreService</a>, <a href="../../../../org/qi4j/cache/memcache/MemcacheConfiguration.html" title="interface in org.qi4j.cache.memcache">MemcacheConfiguration</a>, <a href="../../../../org/qi4j/entitystore/mongodb/MongoMapEntityStoreService.html" title="interface in org.qi4j.entitystore.mongodb">MongoMapEntityStoreService</a>, <a href="../../../../org/qi4j/entitystore/redis/RedisMapEntityStoreService.html" title="interface in org.qi4j.entitystore.redis">RedisMapEntityStoreService</a>, <a href="../../../../org/qi4j/entitystore/riak/RiakMapEntityStoreService.html" title="interface in org.qi4j.entitystore.riak">RiakMapEntityStoreService</a></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../org/qi4j/api/configuration/Configuration.ConfigurationMixin.html" title="class in org.qi4j.api.configuration">Configuration.ConfigurationMixin</a></dd>
</dl>
<hr>
<br>
<pre><a href="../../../../org/qi4j/api/mixin/Mixins.html" title="annotation in org.qi4j.api.mixin">@Mixins</a>(<a href="../../../../org/qi4j/api/mixin/Mixins.html#value()">value</a>=<a href="../../../../org/qi4j/api/configuration/Configuration.ConfigurationMixin.html" title="class in org.qi4j.api.configuration">Configuration.ConfigurationMixin.class</a>)
public interface <span class="strong">Configuration&lt;T&gt;</span></pre>
<div class="block">Provide Configurations for Services. A Service that wants to be configurable
 should inject a reference to Configuration with the Configuration type:
 <pre><code>
  * &#64;This Configuration&#60;MyServiceConfiguration&#62; config;
 </code></pre>
 <p>
 where MyServiceConfiguration extends <a href="../../../../org/qi4j/api/configuration/ConfigurationComposite.html" title="interface in org.qi4j.api.configuration"><code>ConfigurationComposite</code></a>, which itself is an ordinary
 <a href="../../../../org/qi4j/api/entity/EntityComposite.html" title="interface in org.qi4j.api.entity"><code>EntityComposite</code></a>. The Configuration implementation
 will either locate an instance of the given Configuration type in the
 persistent store using the identity of the Service, or create a new such instance
 if one doesn't already exist.
 </p>
 <p>
 If a new Configuration instance is created then it will be populated with properties
 from the properties file whose filesystem name is the same as the identity (e.g. "MyService.properties").
 If a service is not given a name via the <a href="../../../../org/qi4j/bootstrap/ServiceDeclaration.html#identifiedBy(java.lang.String)"><code>ServiceDeclaration.identifiedBy(String)</code></a>, the
 name will default to the FQCN of the ServiceComposite type.
 </p>
 <p>
 The Configuration instance can be modified externally just like any other EntityComposite, but
 its values will not be updated in the Service until <a href="../../../../org/qi4j/api/configuration/Configuration.html#refresh()"><code>refresh()</code></a> is called. This allows
 safe reloads of Configuration state to ensure that it is not reloaded while the Service is handling
 a request.
 </p>
 <p>
 The Configuration will be automatically refreshed when the Service is activated by the Qi4j runtime.
 Any refreshes at other points will have to be done manually or triggered through some other
 mechanism.
 </p>
 <p>
 The user configuration entity is part of a long running <a href="../../../../org/qi4j/api/unitofwork/UnitOfWork.html" title="interface in org.qi4j.api.unitofwork"><code>UnitOfWork</code></a>, and to persist changes to it the
 <a href="../../../../org/qi4j/api/configuration/Configuration.html#save()"><code>save()</code></a> method must be called. No other actions are required. Example;
 </p>
 <pre><code>

 public interface MyConfiguration extends ConfigurationComposite
 {
     Property&lt;Long&gt; timeout();
 }

 :

 &#64;This Configuration&lt;MyConfiguration&gt; config;
 :
 private void setTimeoutConfiguration( long timeout )
 {
     config.get().timeout().set( timeout );
     config.save();
 }
 </code></pre>
 <p>
 And even if a separate thread is using the <code>timeout()</code> configuration when this is happening, the
 <a href="../../../../org/qi4j/api/unitofwork/UnitOfWork.html" title="interface in org.qi4j.api.unitofwork"><code>UnitOfWork</code></a> isolation will ensure that the other thread is not affected. That thread, on the other hand
 will need to do a <a href="../../../../org/qi4j/api/configuration/Configuration.html#refresh()"><code>refresh()</code></a> at an appropriate time to pick up the timeout change. For instance;
 </p>
 <pre><code>

 &#64;Service InventoryService remoteInventoryService;

 public void restockInventoryItem( InventoryItemId id, int itemCount )
 {
     config.refresh();
     long timeout = config.get().timeout().get();

     remoteInventoryService.restock( id, itemCount, timeout );

     :
     :
 }
 </code></pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Interface and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/qi4j/api/configuration/Configuration.ConfigurationMixin.html" title="class in org.qi4j.api.configuration">Configuration.ConfigurationMixin</a>&lt;<a href="../../../../org/qi4j/api/configuration/Configuration.ConfigurationMixin.html" title="type parameter in Configuration.ConfigurationMixin">T</a>&gt;</strong></code>
<div class="block">Implementation of Configuration.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/qi4j/api/configuration/Configuration.html" title="type parameter in Configuration">T</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/qi4j/api/configuration/Configuration.html#get()">get</a></strong>()</code>
<div class="block">Retrieves the user configuration instance managed by this Configuration.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/qi4j/api/configuration/Configuration.html#refresh()">refresh</a></strong>()</code>
<div class="block">Updates the values of the managed user ConfigurationComposite instance from the underlying
 <a href="../../../../org/qi4j/spi/entitystore/EntityStore.html" title="interface in org.qi4j.spi.entitystore"><code>EntityStore</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/qi4j/api/configuration/Configuration.html#save()">save</a></strong>()</code>
<div class="block">Persists the modified values in the user configuration instance to the underlying store.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="get()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre><a href="../../../../org/qi4j/api/configuration/Configuration.html" title="type parameter in Configuration">T</a>&nbsp;get()</pre>
<div class="block">Retrieves the user configuration instance managed by this Configuration.
 <p>
 Even if the user configuration is initialized from properties file, the consistency rules of Qi4j composites
 still applies. If the the properties file is missing a value, then the initialization will fail with a
 RuntimeException. If Constraints has been defined, those will need to be satisfied as well. The user
 configuration instance returned will fulfill the constraints and consistency normal to all composites, and
 can therefor safely be used with additional checks.
 </p></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The fully initialized and ready-to-use user configuration instance.</dd></dl>
</li>
</ul>
<a name="refresh()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refresh</h4>
<pre>void&nbsp;refresh()</pre>
<div class="block">Updates the values of the managed user ConfigurationComposite instance from the underlying
 <a href="../../../../org/qi4j/spi/entitystore/EntityStore.html" title="interface in org.qi4j.spi.entitystore"><code>EntityStore</code></a>.  Any modified values in the current user configuration that
 has not been saved, via <a href="../../../../org/qi4j/api/configuration/Configuration.html#save()"><code>save()</code></a> method, will be lost.</div>
</li>
</ul>
<a name="save()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>save</h4>
<pre>void&nbsp;save()</pre>
<div class="block">Persists the modified values in the user configuration instance to the underlying store.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../org/qi4j/api/configuration/Configuration.ConfigurationMixin.html" title="class in org.qi4j.api.configuration"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/qi4j/api/configuration/Configuration.html" target="_top">Frames</a></li>
<li><a href="Configuration.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_37) on Fri Dec 14 17:18:01 CET 2012 -->
<TITLE>
Configuration (Qi4j SDK 2.0-beta10)
</TITLE>

<META NAME="date" CONTENT="2012-12-14">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Configuration (Qi4j SDK 2.0-beta10)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../org/qi4j/api/configuration/Configuration.ConfigurationMixin.html" title="class in org.qi4j.api.configuration"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/qi4j/api/configuration/Configuration.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Configuration.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.qi4j.api.configuration</FONT>
<BR>
Interface Configuration&lt;T&gt;</H2>
<DL>
<DT><B>All Known Subinterfaces:</B> <DD><A HREF="../../../../org/qi4j/entitystore/file/FileEntityStoreService.html" title="interface in org.qi4j.entitystore.file">FileEntityStoreService</A>, <A HREF="../../../../org/qi4j/entitystore/hazelcast/HazelcastEntityStoreService.html" title="interface in org.qi4j.entitystore.hazelcast">HazelcastEntityStoreService</A>, <A HREF="../../../../org/qi4j/entitystore/jclouds/JCloudsMapEntityStoreService.html" title="interface in org.qi4j.entitystore.jclouds">JCloudsMapEntityStoreService</A>, <A HREF="../../../../org/qi4j/entitystore/jdbm/JdbmEntityStoreService.html" title="interface in org.qi4j.entitystore.jdbm">JdbmEntityStoreService</A>, <A HREF="../../../../org/qi4j/entitystore/mongodb/MongoMapEntityStoreService.html" title="interface in org.qi4j.entitystore.mongodb">MongoMapEntityStoreService</A>, <A HREF="../../../../org/qi4j/entitystore/redis/RedisMapEntityStoreService.html" title="interface in org.qi4j.entitystore.redis">RedisMapEntityStoreService</A>, <A HREF="../../../../org/qi4j/entitystore/riak/RiakMapEntityStoreService.html" title="interface in org.qi4j.entitystore.riak">RiakMapEntityStoreService</A>, <A HREF="../../../../org/qi4j/library/scheduler/SchedulerService.html" title="interface in org.qi4j.library.scheduler">SchedulerService</A></DD>
</DL>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../../../org/qi4j/api/configuration/Configuration.ConfigurationMixin.html" title="class in org.qi4j.api.configuration">Configuration.ConfigurationMixin</A></DD>
</DL>
<HR>
<DL>
<DT><PRE><FONT SIZE="-1"><A HREF="../../../../org/qi4j/api/mixin/Mixins.html" title="annotation in org.qi4j.api.mixin">@Mixins</A>(<A HREF="../../../../org/qi4j/api/mixin/Mixins.html#value()">value</A>=<A HREF="../../../../org/qi4j/api/configuration/Configuration.ConfigurationMixin.html" title="class in org.qi4j.api.configuration">Configuration.ConfigurationMixin.class</A>)
</FONT>public interface <B>Configuration&lt;T&gt;</B></DL>
</PRE>

<P>
Provide Configurations for Services. A Service that wants to be configurable
 should inject a reference to Configuration with the Configuration type:
 <code><pre>
 <p/>
 &#64;This Configuration&#60;MyServiceConfiguration&#62; config;
 </pre></code>
 where MyServiceConfiguration extends <A HREF="../../../../org/qi4j/api/configuration/ConfigurationComposite.html" title="interface in org.qi4j.api.configuration"><CODE>ConfigurationComposite</CODE></A>, which itself is an ordinary
 <A HREF="../../../../org/qi4j/api/entity/EntityComposite.html" title="interface in org.qi4j.api.entity"><CODE>EntityComposite</CODE></A>. The Configuration implementation
 will either locate an instance of the given Configuration type in the
 persistent store using the identity of the Service, or create a new such instance
 if one doesn't already exist.
 <p>
 If a new Configuration instance is created then it will be populated with properties
 from the properties file whose filesystem name is the same as the identity (e.g. "MyService.properties").
 If a service is not given a name via the <A HREF="../../../../org/qi4j/bootstrap/ServiceDeclaration.html#identifiedBy(java.lang.String)"><CODE>ServiceDeclaration.identifiedBy(String)</CODE></A>, the
 name will default to the FQCN of the ServiceComposite type.
 </p>
 <p>
 The Configuration instance can be modified externally just like any other EntityComposite, but
 its values will not be updated in the Service until <A HREF="../../../../org/qi4j/api/configuration/Configuration.html#refresh()"><CODE>refresh()</CODE></A> is called. This allows
 safe reloads of Configuration state to ensure that it is not reloaded while the Service is handling
 a request.
 </p>
 <p>
 The Configuration will be automatically refreshed when the Service is activated by the Qi4j runtime.
 Any refreshes at other points will have to be done manually or triggered through some other
 mechanism.
 </p>
 <p>
 The user configuration entity is part of a long running <A HREF="../../../../org/qi4j/api/unitofwork/UnitOfWork.html" title="interface in org.qi4j.api.unitofwork"><CODE>UnitOfWork</CODE></A>, and to persist changes to it the
 <A HREF="../../../../org/qi4j/api/configuration/Configuration.html#save()"><CODE>save()</CODE></A> method must be called. No other actions are required. Example;
 <pre><code>

 public interface MyConfiguration extends ConfigurationComposite
 {
     Property&lt;Long&gt; timeout();
 }

 :

 &#64;This Configuration&lt;MyConfiguration&gt; config;
 :
 private void setTimeoutConfiguration( long timeout )
 {
     config.get().timeout().set( timeout );
     config.save();
 }
 </code></pre>
 And even if a separate thread is using the <code>timeout()</code> configuration when this is happening, the
 <A HREF="../../../../org/qi4j/api/unitofwork/UnitOfWork.html" title="interface in org.qi4j.api.unitofwork"><CODE>UnitOfWork</CODE></A> isolation will ensure that the other thread is not affected. That thread, on the other hand
 will need to do a <A HREF="../../../../org/qi4j/api/configuration/Configuration.html#refresh()"><CODE>refresh()</CODE></A> at an appropriate time to pick up the timeout change. For instance;
 <code><pre>

 &#64;Service InventoryService remoteInventoryService;

 public void restockInventoryItem( InventoryItemId id, int itemCount )
 {
     config.refresh();
     long timeout = config.get().timeout().get();

     remoteInventoryService.restock( id, itemCount, timeout );

     :
     :
 }
 </pre></code>
 </p>
<P>

<P>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/qi4j/api/configuration/Configuration.ConfigurationMixin.html" title="class in org.qi4j.api.configuration">Configuration.ConfigurationMixin</A>&lt;<A HREF="../../../../org/qi4j/api/configuration/Configuration.ConfigurationMixin.html" title="type parameter in Configuration.ConfigurationMixin">T</A>&gt;</B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Implementation of Configuration.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/qi4j/api/configuration/Configuration.html" title="type parameter in Configuration">T</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/qi4j/api/configuration/Configuration.html#get()">get</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieves the user configuration instance managed by this Configuration.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/qi4j/api/configuration/Configuration.html#refresh()">refresh</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Updates the values of the managed user ConfigurationComposite instance from the underlying
 <A HREF="../../../../org/qi4j/spi/entitystore/EntityStore.html" title="interface in org.qi4j.spi.entitystore"><CODE>EntityStore</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/qi4j/api/configuration/Configuration.html#save()">save</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Persists the modified values in the user configuration instance to the underlying store.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="get()"><!-- --></A><H3>
get</H3>
<PRE>
<A HREF="../../../../org/qi4j/api/configuration/Configuration.html" title="type parameter in Configuration">T</A> <B>get</B>()</PRE>
<DL>
<DD>Retrieves the user configuration instance managed by this Configuration.
 <p/>
 <p>
 Even if the user configuration is initialized from properties file, the consistency rules of Qi4j composites
 still applies. If the the properties file is missing a value, then the initialization will fail with a
 RuntimeException. If Constraints has been defined, those will need to be satisfied as well. The user
 configuration instance returned will fulfill the constraints and consistency normal to all composites, and
 can therefor safely be used with additional checks.
 </p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>The fully initialized and ready-to-use user configuration instance.</DL>
</DD>
</DL>
<HR>

<A NAME="refresh()"><!-- --></A><H3>
refresh</H3>
<PRE>
void <B>refresh</B>()</PRE>
<DL>
<DD>Updates the values of the managed user ConfigurationComposite instance from the underlying
 <A HREF="../../../../org/qi4j/spi/entitystore/EntityStore.html" title="interface in org.qi4j.spi.entitystore"><CODE>EntityStore</CODE></A>.  Any modified values in the current user configuration that
 has not been saved, via <A HREF="../../../../org/qi4j/api/configuration/Configuration.html#save()"><CODE>save()</CODE></A> method, will be lost.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="save()"><!-- --></A><H3>
save</H3>
<PRE>
void <B>save</B>()</PRE>
<DL>
<DD>Persists the modified values in the user configuration instance to the underlying store.
 <p>

 </p>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../org/qi4j/api/configuration/Configuration.ConfigurationMixin.html" title="class in org.qi4j.api.configuration"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/qi4j/api/configuration/Configuration.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Configuration.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
